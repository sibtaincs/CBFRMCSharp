@model CBFRM.Areas.ComplainManagement.Models.UserViewModel
@{
	ViewBag.Title = "User Management Form";
	Layout = "~/Views/Shared/_Layout.cshtml";
	string fsCode = "";
}

@{

	string EditCountryCode = "";
}
@section styles{

	@Styles.Render("~/Content/DataTable/css")
	<!-- Styles -->

	<link href="~/Content/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css" />
	<link href="~/Content/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" rel="stylesheet" />
	<link href="~/Content/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
	<link href="~/Content/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
	<link href="~/Content/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="~/Content/assets/global/plugins/bootstrap-multiselect/css/bootstrap-multiselect.css" rel="stylesheet" />
	<link href="~/Content/application.css" rel="stylesheet" />

}

	<style>


		.sweet-alert {
			background-color: #f9f9f9;
			border-radius: 5px;
			text-align: center;
			position: absolute !important;
			left: 50%;
			top: 50%;
			display: none;
			z-index: 10000000000;
		}

		.portlet.box > .portlet-body {
    background-color: #fff;
    padding: 5px;
}
	</style>
<div class="page-container">
	<div class="page-content-wrapper">
		<!-- BEGIN CONTENT BODY -->
		<div class="page-content">
			<div class="portlet box">


				<div class="portlet-body" style="background-color:#eff3f8">
					<div class="row">

						<div class="col-md-12">
							<div class="col-md-6">
								<div class="portlet box blue">
									<div class="portlet-title">
										<div class="caption">
											<i class="fa fa-flag"></i>Countries Group
										</div>
										<div class="tools">
											<a href="javascript:;" class="collapse"> </a>
										</div>
									</div>
									@foreach (var country in Model.spGetCountry)
									{
										<div class="portlet-body">
											<div class="panel-group accordion" id="accordion1">


												<div class="panel panel-default">
													<div class="panel-heading">
														<h6 class="panel-title">
															<span>

																<a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion1" href="#@country.CountryCode"><i class="fa fa-flag"> @country.CountryName</i> </a>
															</span>


														</h6>

													</div>
													<div id="@country.CountryCode" class="panel-collapse collapse">
														@*<div class="panel-body" style="height:200px; overflow-y:auto;">*@
														<div class="panel-body">
															<!-- mealcord accordian -->
															<div class="panel-group accordion" id="accordion2">


																<div class="panel panel-default">
																	<div class="panel-heading" style="height:30px">
																		<h6 class="panel-title">
																			<span>

																				<button id="@country.CountryCode" data-id="@country.CountryCode" onClick="reply_click(this.id)" class="btn btn-success btn-sm pull-right" data-toggle='modal' data-target='#SaveModalMealCord'>
																					<i class="fa fa-trash"></i> Edit
																				</button>


																				<a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion2" href="#@country.CountryName"><i class="fa fa-user-plus"> Meal Cordinator</i> </a>
																			</span>


																		</h6>

																	</div>
																	<div id="@country.CountryName" class="panel-collapse collapse">
																		@*<div class="panel-body" style="height:200px; overflow-y:auto;">*@
																		<div class="panel-body">
																			@foreach (var user in Model.spEDITMealCordinator.Where(x => x.CountryCode == country.CountryCode))
																			{
																				<p>
																					@(@user.FullName + "-" + @user.EDWPersonID )

																				</p>
																			}
																		</div>
																	</div>
																</div>


															</div>
															<!-- Officer  accordian -->
															<div class="panel-group accordion" id="accordion3">


																<div class="panel panel-default">
																	<div class="panel-heading" style="height:30px">
																		<h6 class="panel-title">
																			<span>

																				<button class="btn btn-success btn-sm pull-right ids" id="@country.CountryCode" data-id="@country.CountryCode" data-toggle='modal' data-target='#SaveModalOfficers'>
																					<i class="fa fa-trash"></i> Edit
																				</button>


																				<a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion3" href="#@country.EDMCountryID"> <i class="fa fa-user-plus"> officer</i></a>
																			</span>


																		</h6>

																	</div>
																	<div id="@country.EDMCountryID" class="panel-collapse collapse">
																		@*<div class="panel-body" style="height:200px; overflow-y:auto;">*@
																		<div class="panel-body">
																			@foreach (var user in Model.spEditOfficer.Where(x => x.CountryCode == country.CountryCode))
																			{
																				<p>
																					@(@user.FullName + " - " + @user.EDWPersonID + " - " + " Site Name" + " - " + user.FieldSiteName )

																				</p>
																			}
																		</div>
																	</div>
																</div>


															</div>
														</div>
													</div>
												</div>


											</div>

										</div>

									}
								</div>
							</div>
							<!-- admin group-->
							<div class="col-md-6">
								<div class="portlet box green">
									<div class="portlet-title">
										<div class="caption">
											<i class="fa fa-group"></i>Admin Group
										</div>
										<div class="tools">
											<a href="javascript:;" class="collapse"> </a>

										</div>
									</div>
									<div class="portlet-body">
										<div class="panel-group accordion" id="accordion4">

											<div class="panel panel-default">
												<div class="panel-heading" style="height:30px">
													<h6 class="panel-title">
														<span>

															<button data-id="" class="btn btn-success btn-sm pull-right ids" data-toggle='modal' data-target='#SaveModalAdmin'>
																<i class="fa fa-trash"></i> Edit
															</button>


															<a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion4" href="#accordion4_1"><i class="fa fa-user-plus">Add Admin</i> </a>
														</span>


													</h6>

												</div>
												<div id="accordion4_1" class="panel-collapse collapse">
													<div class="panel-body" style="height:200px; overflow-y:auto;">
														@foreach (var user in Model.spEDITAdminGroup)
														{


															<p>
																@(@user.FullName + "-" + @user.EDWPersonID )

															</p>
														}

													</div>
												</div>
											</div>



										</div>
									</div>
								</div>



							</div>
							<!-- IT group-->
							<div class="col-md-6">
								<div class="portlet box blue-hoki">
									<div class="portlet-title">
										<div class="caption">
											<i class="fa fa-group"></i>IT Group
										</div>
										<div class="tools">
											<a href="javascript:;" class="collapse"> </a>

										</div>
									</div>
									<div class="portlet-body">
										<div class="panel-group accordion" id="accordion5">

											<div class="panel panel-default">
												<div class="panel-heading" style="height:30px">
													<h6 class="panel-title">
														<span>

															<button data-id="" class="btn btn-success btn-sm pull-right ids" data-toggle='modal' data-target='#SaveModalITGroup'>
																<i class="fa fa-trash"></i> Edit
															</button>


															<a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion5" href="#accordion5_1"><i class="fa fa-user-plus">Add IT Persons</i> </a>
														</span>


													</h6>

												</div>
												<div id="accordion5_1" class="panel-collapse collapse">
													<div class="panel-body" style="height:200px; overflow-y:auto;">
														@foreach (var user in Model.spEDITITGroup)
														{


															<p>
																@(@user.FullName + "-" + @user.EDWPersonID )

															</p>
														}

													</div>
												</div>
											</div>



										</div>
									</div>
								</div>



							</div>
							<!-- HQ Viewer group-->
							<div class="col-md-6">
								<div class="portlet box yellow-crusta">
									<div class="portlet-title">
										<div class="caption">
											<i class="fa fa-group"></i>HQ Viewer Group
										</div>
										<div class="tools">
											<a href="javascript:;" class="collapse"> </a>

										</div>
									</div>
									<div class="portlet-body">
										<div class="panel-group accordion" id="accordion6">

											<div class="panel panel-default">
												<div class="panel-heading" style="height:30px">
													<h6 class="panel-title">
														<span>

															<button data-id="" class="btn btn-success btn-sm pull-right ids" data-toggle='modal' data-target='#SaveModalHQ'>
																<i class="fa fa-trash"></i> Edit
															</button>


															<a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion6" href="#accordion6_1"><i class="fa fa-user-plus">Add HQ Persons</i> </a>
														</span>


													</h6>

												</div>
												<div id="accordion6_1" class="panel-collapse collapse">
													<div class="panel-body" style="height:200px; overflow-y:auto;">
														@foreach (var user in Model.spEDITHQGroup)
														{


															<p>
																@(@user.FullName + "-" + @user.EDWPersonID )

															</p>
														}

													</div>
												</div>
											</div>



										</div>
									</div>
								</div>



							</div>
						</div>

					</div>
				</div>
				
				<div class="modal fade draggable-modal" id="SaveModalMealCord" tabindex="" role="main" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<!-- BEGIN FORM-->
							<form id="CountryValidation" class="form-horizontal" action="/ComplainManagement/Dashboard/Index" method="post">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
									<h4 class="modal-title"><i class="fa fa-edit"></i> <span id="modalHeading1" class="caption-subject font-green bold uppercase">Add User Details</span></h4>
								</div>
								<div class="modal-body">
									<div class="form-body">
										<div class="alert alert-danger display-hide">
											<button class="close" data-close="alert"></button> Please enter Country name!
										</div>
										<div class="alert alert-success display-hide">
											<button class="close" data-close="alert"></button> Please wait request is under process...
										</div>
										<div class="form-group">
											<label class="control-label col-md-2">
												Meal Cord
												<span class="required">  </span>
											</label>
											<div class="col-md-9">

												<div class="input-icon right">
													<i class="fa"></i>
													<select id="dllMealCordinator" name="EDWPersonID" class="form-control select2" multiple data-label="left" data-select-all="true" data-width="100%" data-filter="true" data-action-onchange="true">
														@*@foreach (var item in Model.spGetAppealCommitteName.OrderBy(x => x.FullName))
															{
																bool selected;
																selected = false;


																if (Model.spEDITMealCordinator.Count > 0)
																{
																	foreach (var scid in Model.spEDITMealCordinator)
																	{
																		if (scid.EDWPersonID == item.EDWPersonID)
																		{
																			<option value=@item.EDWPersonID selected>@item.FullName</option>
																			selected = true;
																			break;
																		}
																	}
																}

																if (selected == false)
																{

																	<option value=@item.EDWPersonID>@item.FullName</option>
																}

															}*@



													</select>

												</div>
											</div>
										</div>

										<div class="modal-footer">
											<button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
											<button type="submit" id="btnMealCord" class="btn green">Save MEAL Coordinator </button>
										</div>
									</div>
								</div>
							</form>
							<!-- END FORM-->

						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>
				<div class="modal fade draggable-modal" id="SaveModalOfficers" tabindex="" role="main" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<!-- BEGIN FORM-->
							<form id="CountryValidation" class="form-horizontal" action="/ComplainManagement/Dashboard/Index" method="post">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
									<h4 class="modal-title"><i class="fa fa-edit"></i> <span id="modalHeading" class="caption-subject font-green bold uppercase">Add officers Details</span></h4>
								</div>
								<div class="modal-body">
									<div class="form-body">
										<div class="alert alert-danger display-hide">
											<button class="close" data-close="alert"></button> Please enter Country name!
										</div>
										<div class="alert alert-success display-hide">
											<button class="close" data-close="alert"></button> Please wait request is under process...
										</div>

										<div class="form-group">
											<label class="control-label col-md-2">
												Officer
												<span class="required">  </span>
											</label>
											<div class="col-md-9">
												<input placeholder="search officer" style="width:418px" id="txtofficer" name="" class="form-control" />
												<input id="txtAppealEDWID" placeholder="employee id" class="form-control" value="" type="hidden" />

											</div>
										</div>
										<div class="form-group">
											<label class="control-label col-md-2">
												Field Sites
												<span class="required">  </span>
											</label>
											<div class="col-md-9">
												<div class="input-icon right">
													<i class="fa"></i>

													<select class="form-control tip-top color red" id="dllFieldSite" name="FieldSiteCode">
														@*<option value=""></option>*@

														@*@foreach (var item in Model.spGetFieldSiteCode.OrderBy(x => x.CountryCode))
															{
																if (item.FieldSiteCode == fsCode)
																{
																	<option value="@item.FieldSiteCode" selected>@item.FieldSiteName</option>
																}
																else
																{
																	<option value="@item.FieldSiteCode"> @item.FieldSiteName </option>
																}
															}*@

													</select>

												</div>
											</div>



										</div>
										<div class="form-group">
											<label class="control-label col-md-2">

												<span class="required">  </span>
											</label>
											<div class="col-md-9" style="text-align:center">
												<div class="input-icon right">
													<i class="fa"></i>
													<div class="form-group form-group form-md-line-input form-md-floating-label has-success">
														<button type="button" id="btnAddMultiFields" class="btn btn-default green pul"> <i class="fa fa-plus"></i>Add Multiple Field Site  for officer </button>
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12" style="padding-right:5px;padding-left:5px;">
												<div class="portlet box green-soft" id="prtBoxAppVAS">
													<div class="portlet-title">
														<div class="caption">
															Add Country Site for Officers
														</div>
														<div class="tools">
															<a href="javascript:;" class="collapse" data-original-title="" title=""> </a>

														</div>
													</div>
													<div class="portlet-body">

														<div class="table-scrollable">
															<table class="table table-striped table-hover" id="tblAC">
																<thead>
																	<tr>
																		<th>S.No </th>
																		<th>Full Name </th>
																		<th>EDWID</th>
																		<th>FieldSite</th>

																		<th> </th>
																	</tr>
																</thead>
																<tbody></tbody>
															</table>
														</div>
													</div>
												</div>
											</div>


											<div class="modal-footer">
												<button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
												<button type="submit" id="btnSaveOfficer" class="btn green">Save Officer</button>
											</div>
										</div>

									</div>
								</div>
							</form>
							<!-- END FORM-->

						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>


				<div class="modal fade draggable-modal" id="SaveModalAdmin" tabindex="" role="main" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<!-- BEGIN FORM-->
							<form id="CountryValidation" class="form-horizontal" action="/ComplainManagement/Dashboard/Index" method="post">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
									<h4 class="modal-title"><i class="fa fa-edit"></i> <span id="modalHeading" class="caption-subject font-green bold uppercase">Add Users</span></h4>
								</div>
								<div class="modal-body">
									<div class="form-body">
										<div class="alert alert-danger display-hide">
											<button class="close" data-close="alert"></button> Please enter Country name!
										</div>
										<div class="alert alert-success display-hide">
											<button class="close" data-close="alert"></button> Please wait request is under process...
										</div>
										<div class="form-group">
											<label class="control-label col-md-2">
												Admin Name
												<span class="required"> * </span>
											</label>
											<div class="col-md-9">
												<input type="text" id="TxtID" class="form-control" name="ID" style="display:none" />
												<div class="input-icon right">
													<i class="fa"></i>
													<select id="dlladminGroupName" name="EDWPersonID" class="form-control select2" multiple data-label="left" data-select-all="true" data-width="100%" data-filter="true" data-action-onchange="true">

														@foreach (var item in Model.spGetAppealCommitteName.OrderBy(x => x.FullName))
														{
															bool selected;
															selected = false;

															//spEditAppealCommittee
															if (Model.spEDITAdminGroup.Count > 0)
															{
																foreach (var scid in Model.spEDITAdminGroup)
																{
																	if (scid.EDWPersonID == item.EDWPersonID)
																	{
																		<option value=@item.EDWPersonID selected>@item.FullName</option>
																		selected = true;
																		break;
																	}
																}
															}

															if (selected == false)
															{

																<option value=@item.EDWPersonID>@item.FullName</option>
															}

														}


													</select>

												</div>
											</div>
										</div>

										<div class="modal-footer">
											<button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
											<button type="submit" id="btnAdminGroupSave" class="btn green">Save Admin Group</button>
										</div>
									</div>
								</div>
							</form>
							<!-- END FORM-->

						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>
				<div class="modal fade draggable-modal" id="SaveModalITGroup" tabindex="" role="main" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<!-- BEGIN FORM-->
							<form id="CountryValidation" class="form-horizontal" action="/ComplainManagement/Dashboard/Index" method="post">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
									<h4 class="modal-title"><i class="fa fa-edit"></i> <span id="modalHeading" class="caption-subject font-green bold uppercase">Add Users</span></h4>
								</div>
								<div class="modal-body">
									<div class="form-body">
										<div class="alert alert-danger display-hide">
											<button class="close" data-close="alert"></button> Please enter Country name!
										</div>
										<div class="alert alert-success display-hide">
											<button class="close" data-close="alert"></button> Please wait request is under process...
										</div>
										<div class="form-group">
											<label class="control-label col-md-2">
												Admin Name
												<span class="required"> * </span>
											</label>
											<div class="col-md-9">
												<input type="text" id="TxtID" class="form-control" name="ID" style="display:none" />
												<div class="input-icon right">
													<i class="fa"></i>
													<select id="dllITGroupName" name="EDWPersonID" class="form-control select2" multiple data-label="left" data-select-all="true" data-width="100%" data-filter="true" data-action-onchange="true">

														@foreach (var item in Model.spGetAppealCommitteName.OrderBy(x => x.FullName))
														{
															bool selected;
															selected = false;

															//spEditAppealCommittee
															if (Model.spEDITITGroup.Count > 0)
															{
																foreach (var scid in Model.spEDITITGroup)
																{
																	if (scid.EDWPersonID == item.EDWPersonID)
																	{
																		<option value=@item.EDWPersonID selected>@item.FullName</option>
																		selected = true;
																		break;
																	}
																}
															}

															if (selected == false)
															{

																<option value=@item.EDWPersonID>@item.FullName</option>
															}

														}


													</select>

												</div>
											</div>
										</div>

										<div class="modal-footer">
											<button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
											<button type="submit" id="btnITGroupSave" class="btn green">Save Admin Group</button>
										</div>
									</div>
								</div>
							</form>
							<!-- END FORM-->

						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>
				<div class="modal fade draggable-modal" id="SaveModalHQ" tabindex="" role="main" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<!-- BEGIN FORM-->
							<form id="CountryValidation" class="form-horizontal" action="/ComplainManagement/Dashboard/Index" method="post">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
									<h4 class="modal-title"><i class="fa fa-edit"></i> <span id="modalHeading" class="caption-subject font-green bold uppercase">Add HQ Users</span></h4>
								</div>
								<div class="modal-body">
									<div class="form-body">
										<div class="alert alert-danger display-hide">
											<button class="close" data-close="alert"></button> Please enter Country name!
										</div>
										<div class="alert alert-success display-hide">
											<button class="close" data-close="alert"></button> Please wait request is under process...
										</div>
										<div class="form-group">
											<label class="control-label col-md-2">
												Admin Name
												<span class="required"> * </span>
											</label>
											<div class="col-md-9">
												<input type="text" id="TxtID" class="form-control" name="ID" style="display:none" />
												<div class="input-icon right">
													<i class="fa"></i>
													<select id="dllbtnHQGroupName" name="EDWPersonID" class="form-control select2" multiple data-label="left" data-select-all="true" data-width="100%" data-filter="true" data-action-onchange="true">

														@foreach (var item in Model.spGetAppealCommitteName.OrderBy(x => x.FullName))
														{
															bool selected;
															selected = false;

															//spEditAppealCommittee
															if (Model.spEDITHQGroup.Count > 0)
															{
																foreach (var scid in Model.spEDITHQGroup)
																{
																	if (scid.EDWPersonID == item.EDWPersonID)
																	{
																		<option value=@item.EDWPersonID selected>@item.FullName</option>
																		selected = true;
																		break;
																	}
																}
															}

															if (selected == false)
															{

																<option value=@item.EDWPersonID>@item.FullName</option>
															}

														}


													</select>

												</div>
											</div>
										</div>

										<div class="modal-footer">
											<button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
											<button type="submit" id="btnHQ" class="btn green">Save Admin Group</button>
										</div>
									</div>
								</div>
							</form>
							<!-- END FORM-->

						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>
			</div>

		</div>
	</div>
</div>
@section scripts{

	@Scripts.Render("~/bundles/DataTable/jquery")

	<script src="~/Content/assets/global/plugins/typeahead/handlebars.min.js" type="text/javascript"></script>
	<script src="~/Content/assets/global/plugins/typeahead/typeahead.bundle.min.js" type="text/javascript"></script>
	<script src="~/Content/assets/pages/scripts/components-typeahead.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js"></script>
	<script src="~/Content/assets/global/plugins/select2/js/select2.full.min.js"></script>
	<script src="~/Content/assets/pages/scripts/components-select2.min.js" type="text/javascript"></script>


	<script>

        var viewBag = "";
        $(document).ready(function () {


            $('.datepicker').datepicker({ todayHighlight: true });

			 viewBag = "@TempData["message"]";
        });




		$(document).ready(function () {
			$("#txtofficer").focusout(function () {
				debugger;
				var txtofficer = $('#txtofficer').val();
				if (txtofficer != "") {
					debugger;
					$.ajax({
						type: 'GET',
						url: '/ComplainManagement/Dashboard/Officers',
						datatype: "json",
						contentType: 'application/json; charset=utf-8',
						data: { "UserName": txtofficer },

						async: false,
						success: function (data) {
							debugger;
							if (data != null) {
								if (Object.keys(data).length != 0) {
									$.each(data, function (key, value) {
										$('#txtofficer').val(value.FullName);
										$('#txtAppealEDWID').val(value.EDWPersonID);

									});
								}
							}
						},
						error: function (xhr) {
							showMessage("Oops, Something went wrong", "Error Occured while Ajax Call to load Modules, Please contact with administrator", "warning", "btn-danger");
						}
					});

				}
			});


		});

		var officercountrycode = "";
		$('.ids').click(function () {
			debugger;
			//var par = $(this).parent().parent(); //tr
			//par.remove();
			$('#tblAC tbody').html('');
			officercountrycode = $(this).data('id');
			var htm = "";

			var $select = $('#dllFieldSite');
			$select.html(htm);
			$select.append('<option value="">Select Field Site </option>');
			$.ajax({
				type: 'GET',
				url: '/ComplainManagement/Dashboard/OfficersEdit',
				datatype: "json",
				contentType: 'application/json; charset=utf-8',
				data: { "id": officercountrycode },
				async: false,
				success: function (data) {
					debugger;
					if (data != null) {
						if (Object.keys(data.spGetFieldSiteCode).length != 0) {
							$.each(data.spGetFieldSiteCode, function (key, value) {
								$("#modalHeading1").html("Edit Country Group");
								$select.append($("<option  />").val(value.FieldSiteCode).html(value.FieldSiteName));
							});
						}
					}
				},
				error: function (xhr) {
					showMessage("Oops, Something went wrong", "Error Occured while Ajax Call to load Complaint Category, Please contact with administrator", "warning", "btn-danger");
				}
			});


			$.ajax({
				type: 'GET',
				url: '/ComplainManagement/Dashboard/Edit',
				datatype: "json",
				contentType: 'application/json; charset=utf-8',
				data: { "id": officercountrycode },
				async: false,
				success: function (data) {
					debugger;
					if (data != null) {
						if (Object.keys(data.spEditOfficer).length != 0) {
							$.each(data.spEditOfficer, function (key, value2) {


								var tableRow = "";
								var sr2 = 0;
								sr2 += 1;
								tableRow += "<tr>";
								tableRow += "<td></td>"
								tableRow += "<td>" + value2.FullName + "</td>"
								tableRow += "<td>" + value2.EDWPersonID + "</td>";
								tableRow += "<td>" + value2.FieldSiteName + "</td>";
								tableRow += "<td><button onclick='showMessageConfirmation3(this,0)'  type='button' class='btn btn-sm btn-warning'>";
								tableRow += " <i class='fa fa-trash'></i> Delete</button></td>";
								tableRow += "<td style='display:none'>1</td>"
								tableRow += "</tr>"
								$("#tblAC tbody").append(tableRow);

								AppealResetSr();


							});

						}

					}
				},
				error: function (xhr) {
					showMessage("Oops, Something went wrong", "Error Occured while Ajax Call to load Complaint Category, Please contact with administrator", "warning", "btn-danger");
				}
			});







		});



		function AppealResetSr() {
			debugger;
			var sr = 0;
			var table = $("#tblAC tbody");
			table.find('tr').each(function (i) {
				var $Etds = $(this).find('td');
				debugger;
				sr = sr + 1;
				$Etds.eq(0).text(sr);

				//$(row).closest("tr").find('td').eq(6).text("3");





			});

			
		}


		$("#btnAddMultiFields").click(function () {
			debugger;
			var table = $("#tblAC tbody");


			var name = $("#txtofficer").val();
			var AppealEDWID = $("#txtAppealEDWID").val();
			var FSiteforMultiLoc = $('#dllFieldSite option:selected').val()
			var tableRow = "";
			var sr = 0;
			if (AppealEDWID != "" && FSiteforMultiLoc != "") {

				IsAlreadyExist = 0;
				var ExistingID = "";
				table.find('tr').each(function (i) {
					var $Etds = $(this).find('td'),

						ExistingID = $Etds.eq(3).text().trim();

				    	PersonID = $Etds.eq(2).text().trim();

					if (ExistingID == FSiteforMultiLoc && Number(PersonID)== AppealEDWID) {
						showMessage("Already Assigned this field site to    "  + name );
					
					
						IsAlreadyExist = 1;
						return false;
					}


				});


				if (IsAlreadyExist == 0) {
					sr += 1;
					tableRow += "<tr>";
					tableRow += "<td></td>"
					tableRow += "<td>" + name + "</td>"
					tableRow += "<td>" + AppealEDWID + "</td>";
					tableRow += "<td>" + FSiteforMultiLoc + "</td>";
					tableRow += "<td><button onclick='showMessageConfirmation3(this,0)'  type='button' class='btn btn-sm btn-warning'>";
					tableRow += " <i class='fa fa-trash'></i> Delete</button></td>";
					tableRow += "<td style='display:none'>1</td>"
					tableRow += "</tr>"
					$("#tblAC tbody").append(tableRow);

					AppealResetSr();
					$("#txtofficer").val('');
					$("#txtAppealEDWID").val('');
					$("#dllFieldSite").val('');

				}
			}
			else {
				
				showMessage(name + " Name does not exists or / Select field site properly" );
			}


		});

	   $('#btnSaveOfficer').on('click', function () {
				                   	debugger;
									var ACoptions = [];
									$("#tblAC tr:gt(0)").each(function () {
										var value = $(this);
										var appcommedwid = $.trim(value.find('td:eq(2)').html());//td:eq(0) means first td of this row
										var fieldSiteCode = $.trim(value.find('td:eq(3)').html());

										if ($.trim(appcommedwid)) {
											ACoptions.push({
												'EDWPersonID': appcommedwid.trim(),
												'CountryCode': officercountrycode ,
												'FieldSiteCode': fieldSiteCode
											});
										}

									});
									var urlToSave = "@Url.Action("SaveOfficers", "Dashboard", new { Area = "ComplainManagement" })";
								
									$.ajax({
										dataType: "json",
										contentType: 'application/json; charset=utf-8',
										traditional: true,
										url: urlToSave,
										type: "POST",
										async: false,
										data: JSON.stringify({ "AC": ACoptions}),
										success: function (data) {
											debugger;
											if (data.length > 0) {
												if (data == 'Saved') {
												
													showMessage("Success", "Update Successfully", "success", "btn-success");
												}

											}
										},
										error: function () {

											showMessage("Oops, Something went wrong", "Error Occured while Ajax Call, Please contact with administrator", "warning", "btn-danger");

										}
									});
	  	                          });

		function showMessageConfirmation3(row, ID) {
			debugger;


			var fileName = $(row).closest("tr").find('td').eq(1).text().trim();


			swal({
				title: 'Are your sure you want to delete row',
				text: fileName,
				type: 'warning',
				allowOutsideClick: false,
				showConfirmButton: true,
				showCancelButton: true,
				confirmButtonClass: 'btn-danger',
				cancelButtonClass: 'btn-info',
				closeOnConfirm: false,
				closeOnCancel: true,
				confirmButtonText: 'Yes, Delete It',
				cancelButtonText: 'No, I am not sure',

			},
				function (isConfirm) {
					if (isConfirm) {
						DeleteAppealRow(row, ID);
					} else {

					}
				});


		}
		function DeleteAppealRow(row, ID) {

			$(row).closest('tr').remove();
			AppealResetSr();
			swal.close();
		}
		$('#btnAdminGroupSave').on('click', function () {
					debugger;
								
									var AdminEDWID = [];
									$("#dlladminGroupName option:selected").each(function () {
										var value = $(this).val();

										if ($.trim(value)) {
											AdminEDWID.push({
												'EDWPersonID': value,

											}
											);
										}
									});
									//ComplainManagement / Dashboard / SaveAdminGroup
									var urlToSave = "@Url.Action("SaveAdminGroup", "Dashboard", new { Area = "ComplainManagement" })";
									debugger;
									$.ajax({
										dataType: "json",
										contentType: 'application/json; charset=utf-8',
										traditional: true,
										url: urlToSave,
										type: "POST",
										async: false,
										data: JSON.stringify({ "AC": AdminEDWID}),
										success: function (data) {
											debugger;
											if (data.length > 0) {
												if (data == 'Saved') {

													showMessage("Success", "Update Successfully", "success", "btn-success");
												}

											}
										},
									

										error: function () {

											showMessage("Oops, Something went wrong", "Error Occured while Ajax Call, Please contact with administrator", "warning", "btn-danger");

										}
									});

		});



		$('#btnITGroupSave').on('click', function () {
					debugger;
							
									var ITEDWID = [];
									$("#dllITGroupName option:selected").each(function () {
										var value = $(this).val();

										if ($.trim(value)) {
											ITEDWID.push({
												'EDWPersonID': value,

											}
											);
										}
									});
									//ComplainManagement / Dashboard / SaveITGroup
									var urlToSave = "@Url.Action("SaveITGroup", "Dashboard", new { Area = "ComplainManagement" })";
									debugger;
									$.ajax({
										dataType: "json",
										contentType: 'application/json; charset=utf-8',
										traditional: true,
										url: urlToSave,
										type: "POST",
										async: false,
										data: JSON.stringify({ "AC": ITEDWID}),

										success: function (data) {
											debugger;
											if (data.length > 0) {
												if (data == 'Saved') {

													showMessage("Success", "Update Successfully", "success", "btn-success");
												}

											}
										},

										error: function () {

											showMessage("Oops, Something went wrong", "Error Occured while Ajax Call, Please contact with administrator", "warning", "btn-danger");

										}
									});

		                         });




		$('#btnHQ').on('click', function () {
					debugger;
								
									var HQEDWID = [];
									$("#dllbtnHQGroupName option:selected").each(function () {
										var value = $(this).val();

										if ($.trim(value)) {
											HQEDWID.push({
												'EDWPersonID': value,

											}
											);
										}
									});
									//ComplainManagement / Dashboard / SaveAdminGroup
									var urlToSave = "@Url.Action("SaveHQGroup", "Dashboard", new { Area = "ComplainManagement" })";
									debugger;
									$.ajax({
										dataType: "json",
										contentType: 'application/json; charset=utf-8',
										traditional: true,
										url: urlToSave,
										type: "POST",
										async: false,
										data: JSON.stringify({ "AC": HQEDWID}),

										success: function (data) {
											debugger;
											if (data.length > 0) {
												if (data == 'Saved') {

													showMessage("Success", "Update Successfully", "success", "btn-success");
												}

											}
										},
										error: function () {

											showMessage("Oops, Something went wrong", "Error Occured while Ajax Call, Please contact with administrator", "warning", "btn-danger");

										}
									});
	                       	});

		var countrycode = "";
		function reply_click(clicked_id) {

			debugger;
			countrycode = clicked_id;

			var htm = "";
			var $select = $('#dllMealCordinator');
			$select.html(htm);
			$select.append('<option value=""> </option>');


			$.ajax({
				type: 'GET',
				url: '/ComplainManagement/Dashboard/MealCodinators',
				datatype: "json",
				contentType: 'application/json; charset=utf-8',
				data: { "id": countrycode },
				async: false,
				success: function (data) {
					debugger;
					if (data != null) {
						if (Object.keys(data.spGetAppealCommitteName).length != 0) {
							$.each(data.spGetAppealCommitteName, function (key, value1) {

								$("#modalHeading").html("Edit Country Group");

								var selected = false;
								$.each(data.spMealCordinator, function (key, value) {
									if (value.CountryCode == countrycode && value1.EDWPersonID == value.EDWPersonID) {
										$select.append($("<option selected />").val(value.EDWPersonID).html(value.FullName));
										selected = true;
										return false;
									}

								});

									if (selected==false) {
										$select.append($("<option />").val(value1.EDWPersonID).html(value1.FullName));
									}




							});
						}
					}
				},
				error: function (xhr) {
					showMessage("Oops, Something went wrong", "Error Occured while Ajax Call to load Complaint Category, Please contact with administrator", "warning", "btn-danger");
				}
			});
		}
		$('#btnMealCord').on('click', function () {
					debugger;
							
									var MealCordEDWID = [];
									$("#dllMealCordinator option:selected").each(function () {

										debugger;
										var value = $(this).val();
										var Code = countrycode;
										if ($.trim(value)) {
											MealCordEDWID.push({
												'EDWPersonID': value,
												'Countrycode': Code

											}
											);
										}
									});
									//ComplainManagement / Dashboard / SaveAdminGroup
									var urlToSave = "@Url.Action("SaveMealCord", "Dashboard", new { Area = "ComplainManagement" })";
									debugger;
									$.ajax({
										dataType: "json",
										contentType: 'application/json; charset=utf-8',
										traditional: true,
										url: urlToSave,
										type: "POST",
										async: false,
										data: JSON.stringify({ "AC": MealCordEDWID}),

										success: function (data) {
											debugger;
											if (data.length > 0) {
												if (data == 'Saved') {

													showMessage("Success", "Update Successfully", "success", "btn-success");
												}

											}
										},

										error: function () {

											showMessage("Oops, Something went wrong", "Error Occured while Ajax Call, Please contact with administrator", "warning", "btn-danger");

										}
									});
	  	});



		function showMessage(MessageTitle, MsgText, ALType, BtnClass) {
			debugger;
			swal({
				title: MessageTitle,
				text: MsgText,
				allowOutsideClick: true,
				type: ALType,
				showCancelButton: false,
				confirmButtonClass: BtnClass,
				confirmButtonText: "Okay",
				closeOnConfirm: false,
				timer: 3000

			});
		}

	</script>


}

